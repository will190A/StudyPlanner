"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/generate-plan/route";
exports.ids = ["app/api/generate-plan/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-plan%2Froute&page=%2Fapi%2Fgenerate-plan%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-plan%2Froute.ts&appDir=D%3A%5C%E6%AD%A6%E6%AC%A3%E5%AE%87%5C%E5%A4%A7%E4%B8%89%E4%B8%8B%5C%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AE%BE%E8%AE%A1%E5%A4%A7%E8%B5%9B%5CStudyPlanner2%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5C%E6%AD%A6%E6%AC%A3%E5%AE%87%5C%E5%A4%A7%E4%B8%89%E4%B8%8B%5C%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AE%BE%E8%AE%A1%E5%A4%A7%E8%B5%9B%5CStudyPlanner2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-plan%2Froute&page=%2Fapi%2Fgenerate-plan%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-plan%2Froute.ts&appDir=D%3A%5C%E6%AD%A6%E6%AC%A3%E5%AE%87%5C%E5%A4%A7%E4%B8%89%E4%B8%8B%5C%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AE%BE%E8%AE%A1%E5%A4%A7%E8%B5%9B%5CStudyPlanner2%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5C%E6%AD%A6%E6%AC%A3%E5%AE%87%5C%E5%A4%A7%E4%B8%89%E4%B8%8B%5C%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AE%BE%E8%AE%A1%E5%A4%A7%E8%B5%9B%5CStudyPlanner2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_StudyPlanner2_src_app_api_generate_plan_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/generate-plan/route.ts */ \"(rsc)/./src/app/api/generate-plan/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/generate-plan/route\",\n        pathname: \"/api/generate-plan\",\n        filename: \"route\",\n        bundlePath: \"app/api/generate-plan/route\"\n    },\n    resolvedPagePath: \"D:\\\\武欣宇\\\\大三下\\\\计算机设计大赛\\\\StudyPlanner2\\\\src\\\\app\\\\api\\\\generate-plan\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_StudyPlanner2_src_app_api_generate_plan_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/generate-plan/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZnZW5lcmF0ZS1wbGFuJTJGcm91dGUmcGFnZT0lMkZhcGklMkZnZW5lcmF0ZS1wbGFuJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGZ2VuZXJhdGUtcGxhbiUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDJUU2JUFEJUE2JUU2JUFDJUEzJUU1JUFFJTg3JTVDJUU1JUE0JUE3JUU0JUI4JTg5JUU0JUI4JThCJTVDJUU4JUFFJUExJUU3JUFFJTk3JUU2JTlDJUJBJUU4JUFFJUJFJUU4JUFFJUExJUU1JUE0JUE3JUU4JUI1JTlCJTVDU3R1ZHlQbGFubmVyMiU1Q3NyYyU1Q2FwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9RCUzQSU1QyVFNiVBRCVBNiVFNiVBQyVBMyVFNSVBRSU4NyU1QyVFNSVBNCVBNyVFNCVCOCU4OSVFNCVCOCU4QiU1QyVFOCVBRSVBMSVFNyVBRSU5NyVFNiU5QyVCQSVFOCVBRSVCRSVFOCVBRSVBMSVFNSVBNCVBNyVFOCVCNSU5QiU1Q1N0dWR5UGxhbm5lcjImaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzRCO0FBQ3pHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3R1ZHktcGxhbm5lci8/YTAxNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJEOlxcXFzmrabmrKPlrodcXFxc5aSn5LiJ5LiLXFxcXOiuoeeul+acuuiuvuiuoeWkp+i1m1xcXFxTdHVkeVBsYW5uZXIyXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXGdlbmVyYXRlLXBsYW5cXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2dlbmVyYXRlLXBsYW4vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9nZW5lcmF0ZS1wbGFuXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9nZW5lcmF0ZS1wbGFuL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiRDpcXFxc5q2m5qyj5a6HXFxcXOWkp+S4ieS4i1xcXFzorqHnrpfmnLrorr7orqHlpKfotZtcXFxcU3R1ZHlQbGFubmVyMlxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxnZW5lcmF0ZS1wbGFuXFxcXHJvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9nZW5lcmF0ZS1wbGFuL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-plan%2Froute&page=%2Fapi%2Fgenerate-plan%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-plan%2Froute.ts&appDir=D%3A%5C%E6%AD%A6%E6%AC%A3%E5%AE%87%5C%E5%A4%A7%E4%B8%89%E4%B8%8B%5C%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AE%BE%E8%AE%A1%E5%A4%A7%E8%B5%9B%5CStudyPlanner2%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5C%E6%AD%A6%E6%AC%A3%E5%AE%87%5C%E5%A4%A7%E4%B8%89%E4%B8%8B%5C%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AE%BE%E8%AE%A1%E5%A4%A7%E8%B5%9B%5CStudyPlanner2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/generate-plan/route.ts":
/*!********************************************!*\
  !*** ./src/app/api/generate-plan/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var https_proxy_agent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! https-proxy-agent */ \"(rsc)/./node_modules/https-proxy-agent/dist/index.js\");\n/* harmony import */ var https_proxy_agent__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(https_proxy_agent__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// 配置代理（如果需要）\nconst proxyUrl = process.env.HTTPS_PROXY || process.env.https_proxy;\nconst agent = proxyUrl ? new https_proxy_agent__WEBPACK_IMPORTED_MODULE_1__.HttpsProxyAgent(proxyUrl) : undefined;\nconst MOONSHOT_API_URL = \"https://api.moonshot.cn/v1/chat/completions\";\nconst proxyAgent = new https_proxy_agent__WEBPACK_IMPORTED_MODULE_1__.HttpsProxyAgent(process.env.HTTPS_PROXY || \"\");\nasync function POST(req) {\n    try {\n        const { subjects, startDate, endDate, dailyHours } = await req.json();\n        console.log(\"Received request:\", {\n            subjects,\n            startDate,\n            endDate,\n            dailyHours\n        });\n        if (!subjects || !startDate || !endDate || !dailyHours) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"缺少必要参数\"\n            }, {\n                status: 400\n            });\n        }\n        if (!process.env.MOONSHOT_API_KEY) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Moonshot API key未配置\"\n            }, {\n                status: 500\n            });\n        }\n        // 计算日期范围内的天数\n        const start = new Date(startDate);\n        const end = new Date(endDate);\n        const days = Math.ceil((end.getTime() - start.getTime()) / (1000 * 60 * 60 * 24)) + 1;\n        // 构建提示词\n        const prompt = `你是一个学习计划生成器。请根据以下信息生成一个学习计划，并以JSON数组格式返回。\r\n\r\n输入信息：\r\n- 科目：${subjects.join(\"、\")}\r\n- 开始日期：${startDate}\r\n- 结束日期：${endDate}\r\n- 每日学习时长：${dailyHours}小时\r\n\r\n要求：\r\n1. 每天的任务总时长必须严格等于${dailyHours}小时\r\n2. 每个任务必须包含以下字段：\r\n   - id: 唯一标识符（格式：task-1, task-2等）\r\n   - date: 日期（格式：YYYY-MM-DD）\r\n   - subject: 科目名称\r\n   - description: 任务描述\r\n   - duration: 任务时长（小时，精确到小数点后两位）\r\n   - completed: 是否完成（默认为false）\r\n\r\n请直接返回一个JSON数组，不要包含任何其他文字。示例格式：\r\n[\r\n  {\r\n    \"id\": \"task-1\",\r\n    \"date\": \"${startDate}\",\r\n    \"subject\": \"${subjects[0]}\",\r\n    \"description\": \"具体的学习任务描述\",\r\n    \"duration\": 1.5,\r\n    \"completed\": false\r\n  }\r\n]`;\n        console.log(\"Sending request to Moonshot API...\");\n        const response = await fetch(MOONSHOT_API_URL, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${process.env.MOONSHOT_API_KEY}`\n            },\n            agent: proxyAgent,\n            body: JSON.stringify({\n                model: \"moonshot-v1-8k\",\n                messages: [\n                    {\n                        role: \"system\",\n                        content: \"你是一个学习计划生成器。请严格按照要求返回JSON格式的数据，不要包含任何其他文字。\"\n                    },\n                    {\n                        role: \"user\",\n                        content: prompt\n                    }\n                ],\n                temperature: 0.7,\n                stream: false\n            })\n        });\n        console.log(\"Moonshot API response status:\", response.status);\n        const data = await response.json();\n        console.log(\"Moonshot API response:\", data);\n        if (!response.ok) {\n            console.error(\"Moonshot API error:\", data);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"生成计划失败\"\n            }, {\n                status: 500\n            });\n        }\n        // 解析AI返回的内容\n        const content = data.choices[0].message.content;\n        console.log(\"Raw content from API:\", content);\n        // 尝试提取JSON部分\n        const jsonMatch = content.match(/\\[[\\s\\S]*\\]/);\n        if (!jsonMatch) {\n            console.error(\"No JSON array found in response\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"API返回格式不正确\"\n            }, {\n                status: 500\n            });\n        }\n        let tasks;\n        try {\n            tasks = JSON.parse(jsonMatch[0]);\n        } catch (error) {\n            console.error(\"Error parsing JSON:\", error);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"解析计划失败\"\n            }, {\n                status: 500\n            });\n        }\n        // 验证任务格式\n        if (!Array.isArray(tasks)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"计划格式不正确\"\n            }, {\n                status: 500\n            });\n        }\n        // 验证每个任务是否包含必要字段\n        for (const task of tasks){\n            if (!task.id || !task.date || !task.subject || !task.description || typeof task.duration !== \"number\" || typeof task.completed !== \"boolean\") {\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: \"任务格式不正确\"\n                }, {\n                    status: 500\n                });\n            }\n        }\n        // 按日期分组任务\n        const tasksByDate = {};\n        tasks.forEach((task)=>{\n            if (!tasksByDate[task.date]) {\n                tasksByDate[task.date] = [];\n            }\n            tasksByDate[task.date].push(task);\n        });\n        // 验证每天的任务总时长\n        for (const [date, dateTasks] of Object.entries(tasksByDate)){\n            const totalHours = dateTasks.reduce((sum, task)=>sum + task.duration, 0);\n            if (Math.abs(totalHours - dailyHours) > 0.01) {\n                console.error(`Date ${date} has incorrect total hours: ${totalHours}, expected: ${dailyHours}`);\n                // 调整任务时长\n                const adjustmentFactor = dailyHours / totalHours;\n                dateTasks.forEach((task)=>{\n                    task.duration = Number((task.duration * adjustmentFactor).toFixed(2));\n                });\n            }\n        }\n        // 重新计算总时长\n        const finalTasks = Object.values(tasksByDate).flat();\n        const finalTotalHours = finalTasks.reduce((sum, task)=>sum + task.duration, 0);\n        console.log(\"Final total hours:\", finalTotalHours);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            tasks: finalTasks\n        });\n    } catch (error) {\n        console.error(\"Error in generate-plan:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"生成计划时发生错误\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS9nZW5lcmF0ZS1wbGFuL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMkM7QUFDUztBQUVwRCxhQUFhO0FBQ2IsTUFBTUUsV0FBV0MsUUFBUUMsR0FBRyxDQUFDQyxXQUFXLElBQUlGLFFBQVFDLEdBQUcsQ0FBQ0UsV0FBVztBQUNuRSxNQUFNQyxRQUFRTCxXQUFXLElBQUlELDhEQUFlQSxDQUFDQyxZQUFZTTtBQUV6RCxNQUFNQyxtQkFBbUI7QUFDekIsTUFBTUMsYUFBYSxJQUFJVCw4REFBZUEsQ0FBQ0UsUUFBUUMsR0FBRyxDQUFDQyxXQUFXLElBQUk7QUFFM0QsZUFBZU0sS0FBS0MsR0FBWTtJQUNyQyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxRQUFRLEVBQUVDLFNBQVMsRUFBRUMsT0FBTyxFQUFFQyxVQUFVLEVBQUUsR0FBRyxNQUFNSixJQUFJSyxJQUFJO1FBRW5FQyxRQUFRQyxHQUFHLENBQUMscUJBQXFCO1lBQUVOO1lBQVVDO1lBQVdDO1lBQVNDO1FBQVc7UUFFNUUsSUFBSSxDQUFDSCxZQUFZLENBQUNDLGFBQWEsQ0FBQ0MsV0FBVyxDQUFDQyxZQUFZO1lBQ3RELE9BQU9oQixxREFBWUEsQ0FBQ2lCLElBQUksQ0FDdEI7Z0JBQUVHLE9BQU87WUFBUyxHQUNsQjtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsSUFBSSxDQUFDbEIsUUFBUUMsR0FBRyxDQUFDa0IsZ0JBQWdCLEVBQUU7WUFDakMsT0FBT3RCLHFEQUFZQSxDQUFDaUIsSUFBSSxDQUN0QjtnQkFBRUcsT0FBTztZQUFzQixHQUMvQjtnQkFBRUMsUUFBUTtZQUFJO1FBRWxCO1FBRUEsYUFBYTtRQUNiLE1BQU1FLFFBQVEsSUFBSUMsS0FBS1Y7UUFDdkIsTUFBTVcsTUFBTSxJQUFJRCxLQUFLVDtRQUNyQixNQUFNVyxPQUFPQyxLQUFLQyxJQUFJLENBQUMsQ0FBQ0gsSUFBSUksT0FBTyxLQUFLTixNQUFNTSxPQUFPLEVBQUMsSUFBTSxRQUFPLEtB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Q0FDdEI7WUFBRUcsT0FBTztRQUFZLEdBQ3JCO1lBQUVDLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3R1ZHktcGxhbm5lci8uL3NyYy9hcHAvYXBpL2dlbmVyYXRlLXBsYW4vcm91dGUudHM/ODljNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XHJcbmltcG9ydCB7IEh0dHBzUHJveHlBZ2VudCB9IGZyb20gJ2h0dHBzLXByb3h5LWFnZW50JztcclxuXHJcbi8vIOmFjee9ruS7o+eQhu+8iOWmguaenOmcgOimge+8iVxyXG5jb25zdCBwcm94eVVybCA9IHByb2Nlc3MuZW52LkhUVFBTX1BST1hZIHx8IHByb2Nlc3MuZW52Lmh0dHBzX3Byb3h5O1xyXG5jb25zdCBhZ2VudCA9IHByb3h5VXJsID8gbmV3IEh0dHBzUHJveHlBZ2VudChwcm94eVVybCkgOiB1bmRlZmluZWQ7XHJcblxyXG5jb25zdCBNT09OU0hPVF9BUElfVVJMID0gJ2h0dHBzOi8vYXBpLm1vb25zaG90LmNuL3YxL2NoYXQvY29tcGxldGlvbnMnO1xyXG5jb25zdCBwcm94eUFnZW50ID0gbmV3IEh0dHBzUHJveHlBZ2VudChwcm9jZXNzLmVudi5IVFRQU19QUk9YWSB8fCAnJyk7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgeyBzdWJqZWN0cywgc3RhcnREYXRlLCBlbmREYXRlLCBkYWlseUhvdXJzIH0gPSBhd2FpdCByZXEuanNvbigpO1xyXG4gICAgXHJcbiAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgcmVxdWVzdDonLCB7IHN1YmplY3RzLCBzdGFydERhdGUsIGVuZERhdGUsIGRhaWx5SG91cnMgfSk7XHJcblxyXG4gICAgaWYgKCFzdWJqZWN0cyB8fCAhc3RhcnREYXRlIHx8ICFlbmREYXRlIHx8ICFkYWlseUhvdXJzKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAn57y65bCR5b+F6KaB5Y+C5pWwJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghcHJvY2Vzcy5lbnYuTU9PTlNIT1RfQVBJX0tFWSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ01vb25zaG90IEFQSSBrZXnmnKrphY3nva4nIH0sXHJcbiAgICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICAgICk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8g6K6h566X5pel5pyf6IyD5Zu05YaF55qE5aSp5pWwXHJcbiAgICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKHN0YXJ0RGF0ZSk7XHJcbiAgICBjb25zdCBlbmQgPSBuZXcgRGF0ZShlbmREYXRlKTtcclxuICAgIGNvbnN0IGRheXMgPSBNYXRoLmNlaWwoKGVuZC5nZXRUaW1lKCkgLSBzdGFydC5nZXRUaW1lKCkpIC8gKDEwMDAgKiA2MCAqIDYwICogMjQpKSArIDE7XHJcblxyXG4gICAgLy8g5p6E5bu65o+Q56S66K+NXHJcbiAgICBjb25zdCBwcm9tcHQgPSBg5L2g5piv5LiA5Liq5a2m5Lmg6K6h5YiS55Sf5oiQ5Zmo44CC6K+35qC55o2u5Lul5LiL5L+h5oGv55Sf5oiQ5LiA5Liq5a2m5Lmg6K6h5YiS77yM5bm25LulSlNPTuaVsOe7hOagvOW8j+i/lOWbnuOAglxyXG5cclxu6L6T5YWl5L+h5oGv77yaXHJcbi0g56eR55uu77yaJHtzdWJqZWN0cy5qb2luKCfjgIEnKX1cclxuLSDlvIDlp4vml6XmnJ/vvJoke3N0YXJ0RGF0ZX1cclxuLSDnu5PmnZ/ml6XmnJ/vvJoke2VuZERhdGV9XHJcbi0g5q+P5pel5a2m5Lmg5pe26ZW/77yaJHtkYWlseUhvdXJzfeWwj+aXtlxyXG5cclxu6KaB5rGC77yaXHJcbjEuIOavj+WkqeeahOS7u+WKoeaAu+aXtumVv+W/hemhu+S4peagvOetieS6jiR7ZGFpbHlIb3Vyc33lsI/ml7ZcclxuMi4g5q+P5Liq5Lu75Yqh5b+F6aG75YyF5ZCr5Lul5LiL5a2X5q6177yaXHJcbiAgIC0gaWQ6IOWUr+S4gOagh+ivhuespu+8iOagvOW8j++8mnRhc2stMSwgdGFzay0y562J77yJXHJcbiAgIC0gZGF0ZTog5pel5pyf77yI5qC85byP77yaWVlZWS1NTS1ERO+8iVxyXG4gICAtIHN1YmplY3Q6IOenkeebruWQjeensFxyXG4gICAtIGRlc2NyaXB0aW9uOiDku7vliqHmj4/ov7BcclxuICAgLSBkdXJhdGlvbjog5Lu75Yqh5pe26ZW/77yI5bCP5pe277yM57K+56Gu5Yiw5bCP5pWw54K55ZCO5Lik5L2N77yJXHJcbiAgIC0gY29tcGxldGVkOiDmmK/lkKblrozmiJDvvIjpu5jorqTkuLpmYWxzZe+8iVxyXG5cclxu6K+355u05o6l6L+U5Zue5LiA5LiqSlNPTuaVsOe7hO+8jOS4jeimgeWMheWQq+S7u+S9leWFtuS7luaWh+Wtl+OAguekuuS+i+agvOW8j++8mlxyXG5bXHJcbiAge1xyXG4gICAgXCJpZFwiOiBcInRhc2stMVwiLFxyXG4gICAgXCJkYXRlXCI6IFwiJHtzdGFydERhdGV9XCIsXHJcbiAgICBcInN1YmplY3RcIjogXCIke3N1YmplY3RzWzBdfVwiLFxyXG4gICAgXCJkZXNjcmlwdGlvblwiOiBcIuWFt+S9k+eahOWtpuS5oOS7u+WKoeaPj+i/sFwiLFxyXG4gICAgXCJkdXJhdGlvblwiOiAxLjUsXHJcbiAgICBcImNvbXBsZXRlZFwiOiBmYWxzZVxyXG4gIH1cclxuXWA7XHJcblxyXG4gICAgY29uc29sZS5sb2coJ1NlbmRpbmcgcmVxdWVzdCB0byBNb29uc2hvdCBBUEkuLi4nKTtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goTU9PTlNIT1RfQVBJX1VSTCwge1xyXG4gICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7cHJvY2Vzcy5lbnYuTU9PTlNIT1RfQVBJX0tFWX1gLFxyXG4gICAgICB9LFxyXG4gICAgICBhZ2VudDogcHJveHlBZ2VudCxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG1vZGVsOiAnbW9vbnNob3QtdjEtOGsnLFxyXG4gICAgICAgIG1lc3NhZ2VzOiBbXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHJvbGU6ICdzeXN0ZW0nLFxyXG4gICAgICAgICAgICBjb250ZW50OiAn5L2g5piv5LiA5Liq5a2m5Lmg6K6h5YiS55Sf5oiQ5Zmo44CC6K+35Lil5qC85oyJ54Wn6KaB5rGC6L+U5ZueSlNPTuagvOW8j+eahOaVsOaNru+8jOS4jeimgeWMheWQq+S7u+S9leWFtuS7luaWh+Wtl+OAgidcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICB7XHJcbiAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcclxuICAgICAgICAgICAgY29udGVudDogcHJvbXB0XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgXSxcclxuICAgICAgICB0ZW1wZXJhdHVyZTogMC43LFxyXG4gICAgICAgIHN0cmVhbTogZmFsc2UsXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc29sZS5sb2coJ01vb25zaG90IEFQSSByZXNwb25zZSBzdGF0dXM6JywgcmVzcG9uc2Uuc3RhdHVzKTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICBjb25zb2xlLmxvZygnTW9vbnNob3QgQVBJIHJlc3BvbnNlOicsIGRhdGEpO1xyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgY29uc29sZS5lcnJvcignTW9vbnNob3QgQVBJIGVycm9yOicsIGRhdGEpO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ+eUn+aIkOiuoeWIkuWksei0pScgfSxcclxuICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDop6PmnpBBSei/lOWbnueahOWGheWuuVxyXG4gICAgY29uc3QgY29udGVudCA9IGRhdGEuY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnQ7XHJcbiAgICBjb25zb2xlLmxvZygnUmF3IGNvbnRlbnQgZnJvbSBBUEk6JywgY29udGVudCk7XHJcbiAgICBcclxuICAgIC8vIOWwneivleaPkOWPlkpTT07pg6jliIZcclxuICAgIGNvbnN0IGpzb25NYXRjaCA9IGNvbnRlbnQubWF0Y2goL1xcW1tcXHNcXFNdKlxcXS8pO1xyXG4gICAgaWYgKCFqc29uTWF0Y2gpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignTm8gSlNPTiBhcnJheSBmb3VuZCBpbiByZXNwb25zZScpO1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ0FQSei/lOWbnuagvOW8j+S4jeato+ehricgfSxcclxuICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgdGFza3M7XHJcbiAgICB0cnkge1xyXG4gICAgICB0YXNrcyA9IEpTT04ucGFyc2UoanNvbk1hdGNoWzBdKTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgSlNPTjonLCBlcnJvcik7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAn6Kej5p6Q6K6h5YiS5aSx6LSlJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxyXG4gICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOmqjOivgeS7u+WKoeagvOW8j1xyXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHRhc2tzKSkge1xyXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgeyBlcnJvcjogJ+iuoeWIkuagvOW8j+S4jeato+ehricgfSxcclxuICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyDpqozor4Hmr4/kuKrku7vliqHmmK/lkKbljIXlkKvlv4XopoHlrZfmrrVcclxuICAgIGZvciAoY29uc3QgdGFzayBvZiB0YXNrcykge1xyXG4gICAgICBpZiAoIXRhc2suaWQgfHwgIXRhc2suZGF0ZSB8fCAhdGFzay5zdWJqZWN0IHx8ICF0YXNrLmRlc2NyaXB0aW9uIHx8IHR5cGVvZiB0YXNrLmR1cmF0aW9uICE9PSAnbnVtYmVyJyB8fCB0eXBlb2YgdGFzay5jb21wbGV0ZWQgIT09ICdib29sZWFuJykge1xyXG4gICAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICAgIHsgZXJyb3I6ICfku7vliqHmoLzlvI/kuI3mraPnoa4nIH0sXHJcbiAgICAgICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgICAgICApO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8g5oyJ5pel5pyf5YiG57uE5Lu75YqhXHJcbiAgICBjb25zdCB0YXNrc0J5RGF0ZTogeyBbZGF0ZTogc3RyaW5nXTogYW55W10gfSA9IHt9O1xyXG4gICAgdGFza3MuZm9yRWFjaCh0YXNrID0+IHtcclxuICAgICAgaWYgKCF0YXNrc0J5RGF0ZVt0YXNrLmRhdGVdKSB7XHJcbiAgICAgICAgdGFza3NCeURhdGVbdGFzay5kYXRlXSA9IFtdO1xyXG4gICAgICB9XHJcbiAgICAgIHRhc2tzQnlEYXRlW3Rhc2suZGF0ZV0ucHVzaCh0YXNrKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIOmqjOivgeavj+WkqeeahOS7u+WKoeaAu+aXtumVv1xyXG4gICAgZm9yIChjb25zdCBbZGF0ZSwgZGF0ZVRhc2tzXSBvZiBPYmplY3QuZW50cmllcyh0YXNrc0J5RGF0ZSkpIHtcclxuICAgICAgY29uc3QgdG90YWxIb3VycyA9IGRhdGVUYXNrcy5yZWR1Y2UoKHN1bSwgdGFzaykgPT4gc3VtICsgdGFzay5kdXJhdGlvbiwgMCk7XHJcbiAgICAgIGlmIChNYXRoLmFicyh0b3RhbEhvdXJzIC0gZGFpbHlIb3VycykgPiAwLjAxKSB7IC8vIOWFgeiuuDAuMDHlsI/ml7bnmoTor6/lt65cclxuICAgICAgICBjb25zb2xlLmVycm9yKGBEYXRlICR7ZGF0ZX0gaGFzIGluY29ycmVjdCB0b3RhbCBob3VyczogJHt0b3RhbEhvdXJzfSwgZXhwZWN0ZWQ6ICR7ZGFpbHlIb3Vyc31gKTtcclxuICAgICAgICAvLyDosIPmlbTku7vliqHml7bplb9cclxuICAgICAgICBjb25zdCBhZGp1c3RtZW50RmFjdG9yID0gZGFpbHlIb3VycyAvIHRvdGFsSG91cnM7XHJcbiAgICAgICAgZGF0ZVRhc2tzLmZvckVhY2godGFzayA9PiB7XHJcbiAgICAgICAgICB0YXNrLmR1cmF0aW9uID0gTnVtYmVyKCh0YXNrLmR1cmF0aW9uICogYWRqdXN0bWVudEZhY3RvcikudG9GaXhlZCgyKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyDph43mlrDorqHnrpfmgLvml7bplb9cclxuICAgIGNvbnN0IGZpbmFsVGFza3MgPSBPYmplY3QudmFsdWVzKHRhc2tzQnlEYXRlKS5mbGF0KCk7XHJcbiAgICBjb25zdCBmaW5hbFRvdGFsSG91cnMgPSBmaW5hbFRhc2tzLnJlZHVjZSgoc3VtLCB0YXNrKSA9PiBzdW0gKyB0YXNrLmR1cmF0aW9uLCAwKTtcclxuICAgIGNvbnNvbGUubG9nKCdGaW5hbCB0b3RhbCBob3VyczonLCBmaW5hbFRvdGFsSG91cnMpO1xyXG5cclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHRhc2tzOiBmaW5hbFRhc2tzIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBnZW5lcmF0ZS1wbGFuOicsIGVycm9yKTtcclxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgeyBlcnJvcjogJ+eUn+aIkOiuoeWIkuaXtuWPkeeUn+mUmeivrycgfSxcclxuICAgICAgeyBzdGF0dXM6IDUwMCB9XHJcbiAgICApO1xyXG4gIH1cclxufSAiXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiSHR0cHNQcm94eUFnZW50IiwicHJveHlVcmwiLCJwcm9jZXNzIiwiZW52IiwiSFRUUFNfUFJPWFkiLCJodHRwc19wcm94eSIsImFnZW50IiwidW5kZWZpbmVkIiwiTU9PTlNIT1RfQVBJX1VSTCIsInByb3h5QWdlbnQiLCJQT1NUIiwicmVxIiwic3ViamVjdHMiLCJzdGFydERhdGUiLCJlbmREYXRlIiwiZGFpbHlIb3VycyIsImpzb24iLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJzdGF0dXMiLCJNT09OU0hPVF9BUElfS0VZIiwic3RhcnQiLCJEYXRlIiwiZW5kIiwiZGF5cyIsIk1hdGgiLCJjZWlsIiwiZ2V0VGltZSIsInByb21wdCIsImpvaW4iLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibW9kZWwiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwidGVtcGVyYXR1cmUiLCJzdHJlYW0iLCJkYXRhIiwib2siLCJjaG9pY2VzIiwibWVzc2FnZSIsImpzb25NYXRjaCIsIm1hdGNoIiwidGFza3MiLCJwYXJzZSIsIkFycmF5IiwiaXNBcnJheSIsInRhc2siLCJpZCIsImRhdGUiLCJzdWJqZWN0IiwiZGVzY3JpcHRpb24iLCJkdXJhdGlvbiIsImNvbXBsZXRlZCIsInRhc2tzQnlEYXRlIiwiZm9yRWFjaCIsInB1c2giLCJkYXRlVGFza3MiLCJPYmplY3QiLCJlbnRyaWVzIiwidG90YWxIb3VycyIsInJlZHVjZSIsInN1bSIsImFicyIsImFkanVzdG1lbnRGYWN0b3IiLCJOdW1iZXIiLCJ0b0ZpeGVkIiwiZmluYWxUYXNrcyIsInZhbHVlcyIsImZsYXQiLCJmaW5hbFRvdGFsSG91cnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/generate-plan/route.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/debug","vendor-chunks/https-proxy-agent","vendor-chunks/agent-base","vendor-chunks/supports-color","vendor-chunks/ms","vendor-chunks/has-flag"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fgenerate-plan%2Froute&page=%2Fapi%2Fgenerate-plan%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fgenerate-plan%2Froute.ts&appDir=D%3A%5C%E6%AD%A6%E6%AC%A3%E5%AE%87%5C%E5%A4%A7%E4%B8%89%E4%B8%8B%5C%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AE%BE%E8%AE%A1%E5%A4%A7%E8%B5%9B%5CStudyPlanner2%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5C%E6%AD%A6%E6%AC%A3%E5%AE%87%5C%E5%A4%A7%E4%B8%89%E4%B8%8B%5C%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%AE%BE%E8%AE%A1%E5%A4%A7%E8%B5%9B%5CStudyPlanner2&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();