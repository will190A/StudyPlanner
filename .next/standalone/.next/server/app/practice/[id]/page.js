(()=>{var e={};e.id=4052,e.ids=[4052],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25247:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>f,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o}),r(17932),r(83336),r(35866);var s=r(23191),a=r(88716),n=r(37922),i=r.n(n),l=r(95231),d={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let o=["",{children:["practice",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,17932)),"D:\\武欣宇\\大三下\\计算机设计大赛\\StudyPlanner2\\src\\app\\practice\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,83336)),"D:\\武欣宇\\大三下\\计算机设计大赛\\StudyPlanner2\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\武欣宇\\大三下\\计算机设计大赛\\StudyPlanner2\\src\\app\\practice\\[id]\\page.tsx"],u="/practice/[id]/page",f={require:r,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/practice/[id]/page",pathname:"/practice/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},68317:(e,t,r)=>{Promise.resolve().then(r.bind(r,91936))},86333:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},32933:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},48998:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},75290:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});let s=(0,r(76557).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},91936:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ew});var s=r(10326),a=r(17577),n=r(35047),i=r(29752),l=r(91664),d=r(82548),o=r(82561),c=r(48051),u=r(93095),f=r(45226),x=r(70545),p=r(88957),m=r(55049),h=r(52067),b=r(17124),g="rovingFocusGroup.onEntryFocus",v={bubbles:!1,cancelable:!0},y="RovingFocusGroup",[j,w,N]=(0,x.B)(y),[k,C]=(0,u.b)(y,[N]),[R,S]=k(y),A=a.forwardRef((e,t)=>(0,s.jsx)(j.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,s.jsx)(j.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,s.jsx)(_,{...e,ref:t})})}));A.displayName=y;var _=a.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:l,currentTabStopId:d,defaultCurrentTabStopId:u,onCurrentTabStopIdChange:x,onEntryFocus:p,preventScrollOnEntryFocus:j=!1,...N}=e,k=a.useRef(null),C=(0,c.e)(t,k),S=(0,b.gm)(l),[A,_]=(0,h.T)({prop:d,defaultProp:u??null,onChange:x,caller:y}),[E,P]=a.useState(!1),D=(0,m.W)(p),$=w(r),z=a.useRef(!1),[F,T]=a.useState(0);return a.useEffect(()=>{let e=k.current;if(e)return e.addEventListener(g,D),()=>e.removeEventListener(g,D)},[D]),(0,s.jsx)(R,{scope:r,orientation:n,dir:S,loop:i,currentTabStopId:A,onItemFocus:a.useCallback(e=>_(e),[_]),onItemShiftTab:a.useCallback(()=>P(!0),[]),onFocusableItemAdd:a.useCallback(()=>T(e=>e+1),[]),onFocusableItemRemove:a.useCallback(()=>T(e=>e-1),[]),children:(0,s.jsx)(f.WV.div,{tabIndex:E||0===F?-1:0,"data-orientation":n,...N,ref:C,style:{outline:"none",...e.style},onMouseDown:(0,o.M)(e.onMouseDown,()=>{z.current=!0}),onFocus:(0,o.M)(e.onFocus,e=>{let t=!z.current;if(e.target===e.currentTarget&&t&&!E){let t=new CustomEvent(g,v);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=$().filter(e=>e.focusable);M([e.find(e=>e.active),e.find(e=>e.id===A),...e].filter(Boolean).map(e=>e.ref.current),j)}}z.current=!1}),onBlur:(0,o.M)(e.onBlur,()=>P(!1))})})}),E="RovingFocusGroupItem",P=a.forwardRef((e,t)=>{let{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:l,children:d,...c}=e,u=(0,p.M)(),x=l||u,m=S(E,r),h=m.currentTabStopId===x,b=w(r),{onFocusableItemAdd:g,onFocusableItemRemove:v,currentTabStopId:y}=m;return a.useEffect(()=>{if(n)return g(),()=>v()},[n,g,v]),(0,s.jsx)(j.ItemSlot,{scope:r,id:x,focusable:n,active:i,children:(0,s.jsx)(f.WV.span,{tabIndex:h?0:-1,"data-orientation":m.orientation,...c,ref:t,onMouseDown:(0,o.M)(e.onMouseDown,e=>{n?m.onItemFocus(x):e.preventDefault()}),onFocus:(0,o.M)(e.onFocus,()=>m.onItemFocus(x)),onKeyDown:(0,o.M)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey){m.onItemShiftTab();return}if(e.target!==e.currentTarget)return;let t=function(e,t,r){var s;let a=(s=e.key,"rtl"!==r?s:"ArrowLeft"===s?"ArrowRight":"ArrowRight"===s?"ArrowLeft":s);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(a))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(a)))return D[a]}(e,m.orientation,m.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let r=b().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)r.reverse();else if("prev"===t||"next"===t){"prev"===t&&r.reverse();let s=r.indexOf(e.currentTarget);r=m.loop?function(e,t){return e.map((r,s)=>e[(t+s)%e.length])}(r,s+1):r.slice(s+1)}setTimeout(()=>M(r))}}),children:"function"==typeof d?d({isCurrentTabStop:h,hasTabStop:null!=y}):d})})});P.displayName=E;var D={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function M(e,t=!1){let r=document.activeElement;for(let s of e)if(s===r||(s.focus({preventScroll:t}),document.activeElement!==r))return}var $=r(2566),z=r(53405),F=r(9815),T="Radio",[I,Z]=(0,u.b)(T),[q,L]=I(T),V=a.forwardRef((e,t)=>{let{__scopeRadio:r,name:n,checked:i=!1,required:l,disabled:d,value:u="on",onCheck:x,form:p,...m}=e,[h,b]=a.useState(null),g=(0,c.e)(t,e=>b(e)),v=a.useRef(!1),y=!h||p||!!h.closest("form");return(0,s.jsxs)(q,{scope:r,checked:i,disabled:d,children:[(0,s.jsx)(f.WV.button,{type:"button",role:"radio","aria-checked":i,"data-state":K(i),"data-disabled":d?"":void 0,disabled:d,value:u,...m,ref:g,onClick:(0,o.M)(e.onClick,e=>{i||x?.(),y&&(v.current=e.isPropagationStopped(),v.current||e.stopPropagation())})}),y&&(0,s.jsx)(G,{control:h,bubbles:!v.current,name:n,value:u,checked:i,required:l,disabled:d,form:p,style:{transform:"translateX(-100%)"}})]})});V.displayName=T;var W="RadioIndicator",O=a.forwardRef((e,t)=>{let{__scopeRadio:r,forceMount:a,...n}=e,i=L(W,r);return(0,s.jsx)(F.z,{present:a||i.checked,children:(0,s.jsx)(f.WV.span,{"data-state":K(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:t})})});O.displayName=W;var G=a.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:n=!0,...i},l)=>{let d=a.useRef(null),o=(0,c.e)(d,l),u=(0,z.D)(r),x=(0,$.t)(t);return a.useEffect(()=>{let e=d.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(u!==r&&t){let s=new Event("click",{bubbles:n});t.call(e,r),e.dispatchEvent(s)}},[u,r,n]),(0,s.jsx)(f.WV.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...i,tabIndex:-1,ref:o,style:{...i.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function K(e){return e?"checked":"unchecked"}G.displayName="RadioBubbleInput";var B=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],X="RadioGroup",[H,U]=(0,u.b)(X,[C,Z]),Y=C(),J=Z(),[Q,ee]=H(X),et=a.forwardRef((e,t)=>{let{__scopeRadioGroup:r,name:a,defaultValue:n,value:i,required:l=!1,disabled:d=!1,orientation:o,dir:c,loop:u=!0,onValueChange:x,...p}=e,m=Y(r),g=(0,b.gm)(c),[v,y]=(0,h.T)({prop:i,defaultProp:n??"",onChange:x,caller:X});return(0,s.jsx)(Q,{scope:r,name:a,required:l,disabled:d,value:v,onValueChange:y,children:(0,s.jsx)(A,{asChild:!0,...m,orientation:o,dir:g,loop:u,children:(0,s.jsx)(f.WV.div,{role:"radiogroup","aria-required":l,"aria-orientation":o,"data-disabled":d?"":void 0,dir:g,...p,ref:t})})})});et.displayName=X;var er="RadioGroupItem",es=a.forwardRef((e,t)=>{let{__scopeRadioGroup:r,disabled:n,...i}=e,l=ee(er,r),d=l.disabled||n,u=Y(r),f=J(r),x=a.useRef(null),p=(0,c.e)(t,x),m=l.value===i.value,h=a.useRef(!1);return a.useEffect(()=>{let e=e=>{B.includes(e.key)&&(h.current=!0)},t=()=>h.current=!1;return document.addEventListener("keydown",e),document.addEventListener("keyup",t),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}},[]),(0,s.jsx)(P,{asChild:!0,...u,focusable:!d,active:m,children:(0,s.jsx)(V,{disabled:d,required:l.required,checked:m,...f,...i,name:l.name,ref:p,onCheck:()=>l.onValueChange(i.value),onKeyDown:(0,o.M)(e=>{"Enter"===e.key&&e.preventDefault()}),onFocus:(0,o.M)(i.onFocus,()=>{h.current&&x.current?.click()})})})});es.displayName=er;var ea=a.forwardRef((e,t)=>{let{__scopeRadioGroup:r,...a}=e,n=J(r);return(0,s.jsx)(O,{...n,...a,ref:t})});ea.displayName="RadioGroupIndicator";var en=r(76557);let ei=(0,en.Z)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var el=r(51223);let ed=a.forwardRef(({className:e,...t},r)=>s.jsx(et,{className:(0,el.cn)("grid gap-2",e),...t,ref:r}));ed.displayName=et.displayName;let eo=a.forwardRef(({className:e,...t},r)=>s.jsx(es,{ref:r,className:(0,el.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(ea,{className:"flex items-center justify-center",children:s.jsx(ei,{className:"h-2.5 w-2.5 fill-current text-current"})})}));eo.displayName=es.displayName;var ec=r(9280),eu=r(44794),ef=r(82015);let ex=(0,en.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),ep=(0,en.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);function em({id:e,title:t,content:r,type:n,options:d=[],onAnswer:o,userAnswer:c,isRevealed:u=!1,isCorrect:f,correctAnswer:x,explanation:p,disabled:m=!1}){let[h,b]=(0,a.useState)(c||("multiple"===n?[]:"")),g=t=>{b(t),o(e,t)},v=(t,r)=>{let s;b(s=Array.isArray(h)?r?[...h,t]:h.filter(e=>e!==t):r?[t]:[]),o(e,s)},y=t=>{b(t),o(e,t)};return(0,s.jsxs)(i.Zb,{className:"mb-6",children:[s.jsx(i.Ol,{children:(0,s.jsxs)(i.ll,{className:"flex items-center justify-between text-lg font-semibold select-none",children:[(0,s.jsxs)("div",{children:["choice"===n&&s.jsx("span",{className:"badge bg-blue-100 text-blue-800 text-xs py-1 px-2 rounded-full mr-2",children:"单选题"}),"multiple"===n&&s.jsx("span",{className:"badge bg-purple-100 text-purple-800 text-xs py-1 px-2 rounded-full mr-2",children:"多选题"}),"judge"===n&&s.jsx("span",{className:"badge bg-green-100 text-green-800 text-xs py-1 px-2 rounded-full mr-2",children:"判断题"}),"fill"===n&&s.jsx("span",{className:"badge bg-orange-100 text-orange-800 text-xs py-1 px-2 rounded-full mr-2",children:"填空题"}),"code"===n&&s.jsx("span",{className:"badge bg-gray-100 text-gray-800 text-xs py-1 px-2 rounded-full mr-2",children:"编程题"}),t]}),u&&(f?(0,s.jsxs)("span",{className:"flex items-center text-green-600",children:[s.jsx(ex,{className:"h-5 w-5 mr-1"}),"答对了"]}):(0,s.jsxs)("span",{className:"flex items-center text-red-600",children:[s.jsx(ep,{className:"h-5 w-5 mr-1"}),"答错了"]}))]})}),s.jsx(i.aY,{children:(0,s.jsxs)("div",{className:"space-y-4",children:[s.jsx("div",{className:"text-gray-700 whitespace-pre-line select-none",children:r}),"choice"===n&&d&&d.length>0&&s.jsx(ed,{value:h,onValueChange:g,disabled:m,children:s.jsx("div",{className:"space-y-2",children:d.map(t=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(eo,{value:t.label,id:`${e}-${t.label}`,disabled:m}),(0,s.jsxs)(eu._,{htmlFor:`${e}-${t.label}`,className:`
                        ${u&&x===t.label?"text-green-600 font-medium":u&&c===t.label&&!1===f?"text-red-600 font-medium":""}
                        select-none
                      `,children:[t.label,". ",t.text]})]},t.label))})}),"multiple"===n&&d&&d.length>0&&s.jsx("div",{className:"space-y-2",children:d.map(t=>(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(ec.X,{id:`${e}-${t.label}`,checked:Array.isArray(h)&&h.includes(t.label),onCheckedChange:e=>v(t.label,e),disabled:m}),(0,s.jsxs)(eu._,{htmlFor:`${e}-${t.label}`,className:`
                      ${u&&Array.isArray(x)&&x.includes(t.label)?"text-green-600 font-medium":u&&Array.isArray(c)&&c.includes(t.label)&&Array.isArray(x)&&!x.includes(t.label)?"text-red-600 font-medium":""}
                      select-none
                    `,children:[t.label,". ",t.text]})]},t.label))}),"judge"===n&&s.jsx(ed,{value:h,onValueChange:g,disabled:m,children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(eo,{value:"true",id:`${e}-true`,disabled:m}),s.jsx(eu._,{htmlFor:`${e}-true`,className:`
                      ${u&&"true"===x?"text-green-600 font-medium":u&&"true"===c&&c!==x?"text-red-600 font-medium":""}
                      select-none
                    `,children:"正确"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(eo,{value:"false",id:`${e}-false`,disabled:m}),s.jsx(eu._,{htmlFor:`${e}-false`,className:`
                      ${u&&"false"===x?"text-green-600 font-medium":u&&"false"===c&&c!==x?"text-red-600 font-medium":""}
                      select-none
                    `,children:"错误"})]})]})}),("fill"===n||"code"===n)&&s.jsx(ef.g,{value:h,onChange:e=>y(e.target.value),placeholder:"fill"===n?"请输入答案":"请编写代码",className:"min-h-[100px]",disabled:m}),u&&p&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 rounded-md",children:[s.jsx("h4",{className:"font-semibold text-blue-900 select-none",children:"答案解析："}),s.jsx("div",{className:"text-blue-800 mt-1 whitespace-pre-line select-none",children:p})]})]})}),!u&&s.jsx(i.eW,{className:"flex justify-end",children:s.jsx(l.z,{variant:"outline",onClick:()=>o(e,h),disabled:m||""===h||Array.isArray(h)&&0===h.length,children:"确认答案"})})]})}var eh=r(33261),eb=r(75290),eg=r(86333),ev=r(48998),ey=r(32933),ej=r(77109);function ew({params:e}){let t=(0,n.useRouter)(),{data:r}=(0,ej.useSession)(),[o,c]=(0,a.useState)(null),[u,f]=(0,a.useState)([]),[x,p]=(0,a.useState)(!0),[m,h]=(0,a.useState)(""),[b,g]=(0,a.useState)(0),[v,y]=(0,a.useState)({}),[j,w]=(0,a.useState)({}),[N,k]=(0,a.useState)(!1),[C,R]=(0,a.useState)(!1),[S,A]=(0,a.useState)({}),[_,E]=(0,a.useState)({}),[P,D]=(0,a.useState)({}),[M]=(0,a.useState)(new Date),[$,z]=(0,a.useState)(0),F=()=>r?.user&&"id"in r.user?r.user.id:"6804c5d6112eb76d7c0ec957",T=e=>`${Math.floor(e/3600).toString().padStart(2,"0")}:${Math.floor(e%3600/60).toString().padStart(2,"0")}:${(e%60).toString().padStart(2,"0")}`,I=async e=>{try{let t=v[e];if(!t)return;let r=F(),s=await fetch("/api/questions/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({questionId:e,userAnswer:t,userId:r})});if(!s.ok)throw Error("验证答案失败");let a=await s.json();return D(t=>({...t,[e]:a.isCorrect})),a.isCorrect?E(t=>({...t,[e]:a.explanation})):(A(t=>({...t,[e]:a.correctAnswer})),E(t=>({...t,[e]:a.explanation}))),w(t=>({...t,[e]:!0})),a.isCorrect}catch(e){return console.error("Error verifying answer:",e),!1}},Z=async()=>{if(o)try{k(!0),R(!0);let e=Math.floor((new Date().getTime()-M.getTime())/1e3);z(e);let t=F(),r=await fetch(`/api/practices/${o._id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({answers:v,userId:t})});if(!r.ok)throw Error("提交练习失败");let s=await r.json();for(let e of(c(s.practice),u))if(!j[e._id])try{let t=await fetch(`/api/questions/${e._id}?showAnswer=true`);if(t.ok){let r=await t.json();A(t=>({...t,[e._id]:r.answer})),E(t=>({...t,[e._id]:r.explanation})),w(t=>({...t,[e._id]:!0}))}}catch(t){console.error(`Error fetching answer for question ${e._id}:`,t)}k(!1)}catch(e){console.error("Error submitting practice:",e),h("提交练习失败，请重试"),k(!1)}},q=e=>{e>=0&&e<u.length&&g(e)},L=()=>o&&u.length?o.questions.filter(e=>e.isCorrect).length/u.length*100:0;if(x)return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:[s.jsx(eb.Z,{className:"h-8 w-8 animate-spin text-gray-500"}),s.jsx("span",{className:"ml-2 text-gray-500",children:"加载中..."})]});if(m)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"max-w-md w-full",children:[s.jsx(eh.bZ,{variant:"destructive",children:s.jsx(eh.X,{children:m})}),s.jsx(l.z,{className:"mt-4",onClick:()=>t.push("/practice"),children:"返回练习列表"})]})});if(!o||!u.length)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"max-w-md w-full",children:[s.jsx(eh.bZ,{children:s.jsx(eh.X,{children:"未找到练习或练习中没有题目"})}),s.jsx(l.z,{className:"mt-4",onClick:()=>t.push("/practice"),children:"返回练习列表"})]})});let V=u[b];return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[s.jsx(d.default,{}),s.jsx("main",{className:"pt-16",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(l.z,{variant:"outline",size:"icon",onClick:()=>t.push("/practice"),className:"mr-4",children:s.jsx(eg.Z,{className:"h-4 w-4"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 select-none",children:o.title})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center text-gray-600 select-none pointer-events-none",children:[s.jsx(ev.Z,{className:"h-4 w-4 mr-1"}),s.jsx("span",{children:T($)})]}),C&&(0,s.jsxs)("div",{className:"flex items-center text-green-600 select-none pointer-events-none",children:[s.jsx(ey.Z,{className:"h-4 w-4 mr-1"}),(0,s.jsxs)("span",{children:["正确率: ",o?.accuracy?o.accuracy.toFixed(1):L().toFixed(1),"%"]})]})]})]}),s.jsx("div",{className:"mb-6 flex flex-wrap gap-2",children:u.map((e,t)=>{let r=!!v[e._id],a=!!j[e._id],n=P[e._id];return console.log(`题目导航 - 题目${e._id}状态:`,{isAnswered:r,isRevealed:a,isCorrect:n}),s.jsx(l.z,{variant:b===t?"default":"outline",size:"sm",className:`
                    ${r?"border-2":""}
                    ${a&&n?"bg-green-100 border-green-500 text-green-800":""}
                    ${a&&!n?"bg-red-100 border-red-500 text-red-800":""}
                  `,onClick:()=>q(t),children:t+1},e._id)})}),V&&s.jsx(em,{id:V._id,title:V.title,content:V.content,type:V.type,options:V.options,onAnswer:(e,t)=>{y(r=>({...r,[e]:t}))},userAnswer:v[V._id],isRevealed:j[V._id],isCorrect:P[V._id],correctAnswer:S[V._id],explanation:_[V._id],disabled:C},`question-${V._id}-${b}`),(0,s.jsxs)("div",{className:"mt-6 flex justify-between",children:[s.jsx(l.z,{variant:"outline",onClick:()=>{b>0&&g(e=>e-1)},disabled:0===b,children:"上一题"}),(0,s.jsxs)("div",{children:[!C&&!j[V?._id]&&s.jsx(l.z,{className:"mr-2",onClick:()=>I(V._id),disabled:!v[V?._id],children:"检查答案"}),!C&&s.jsx(l.z,{onClick:Z,disabled:N||Object.keys(v).length!==u.length,children:N?(0,s.jsxs)(s.Fragment,{children:[s.jsx(eb.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"提交中..."]}):"提交全部"})]}),s.jsx(l.z,{variant:"outline",onClick:()=>{b<u.length-1&&g(e=>e+1)},disabled:b===u.length-1,children:"下一题"})]}),C&&(0,s.jsxs)(i.Zb,{className:"mt-8",children:[s.jsx(i.Ol,{children:s.jsx(i.ll,{className:"select-none",children:"练习结果"})}),s.jsx(i.aY,{children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-green-50 rounded-md",children:[s.jsx("div",{className:"text-sm text-green-600 select-none",children:"正确题数"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-green-700 select-none",children:[o.correctCount," / ",o.totalQuestions]})]}),(0,s.jsxs)("div",{className:"p-4 bg-blue-50 rounded-md",children:[s.jsx("div",{className:"text-sm text-blue-600 select-none",children:"正确率"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-blue-700 select-none",children:[o?.accuracy?o.accuracy.toFixed(1):L().toFixed(1),"%"]})]}),(0,s.jsxs)("div",{className:"p-4 bg-purple-50 rounded-md",children:[s.jsx("div",{className:"text-sm text-purple-600 select-none",children:"用时"}),s.jsx("div",{className:"text-2xl font-bold text-purple-700 select-none",children:T($)})]})]})})]})]})})]})}},33261:(e,t,r)=>{"use strict";r.d(t,{X:()=>o,bZ:()=>d});var s=r(10326),a=r(17577),n=r(79360),i=r(51223);let l=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=a.forwardRef(({className:e,variant:t,...r},a)=>s.jsx("div",{ref:a,role:"alert",className:(0,i.cn)(l({variant:t}),e),...r}));d.displayName="Alert",a.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:(0,i.cn)("mb-1 font-medium leading-none tracking-tight",e),...t})).displayName="AlertTitle";let o=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,i.cn)("text-sm [&_p]:leading-relaxed",e),...t}));o.displayName="AlertDescription"},91664:(e,t,r)=>{"use strict";r.d(t,{d:()=>d,z:()=>o});var s=r(10326),a=r(17577),n=r(34214),i=r(79360),l=r(51223);let d=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...i},o)=>{let c=a?n.g7:"button";return s.jsx(c,{className:(0,l.cn)(d({variant:t,size:r,className:e})),ref:o,...i})});o.displayName="Button"},29752:(e,t,r)=>{"use strict";r.d(t,{Ol:()=>l,SZ:()=>o,Zb:()=>i,aY:()=>c,eW:()=>u,ll:()=>d});var s=r(10326),a=r(17577),n=r(51223);let i=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...t}));i.displayName="Card";let l=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let d=a.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:(0,n.cn)("font-semibold leading-none tracking-tight",e),...t}));d.displayName="CardTitle";let o=a.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));o.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=a.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",e),...t}));u.displayName="CardFooter"},9280:(e,t,r)=>{"use strict";r.d(t,{X:()=>d});var s=r(10326),a=r(17577),n=r(13635),i=r(32933),l=r(51223);let d=a.forwardRef(({className:e,...t},r)=>s.jsx(n.fC,{ref:r,className:(0,l.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(n.z$,{className:(0,l.cn)("flex items-center justify-center text-current"),children:s.jsx(i.Z,{className:"h-4 w-4"})})}));d.displayName=n.fC.displayName},44794:(e,t,r)=>{"use strict";r.d(t,{_:()=>o});var s=r(10326),a=r(17577),n=r(34478),i=r(79360),l=r(51223);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef(({className:e,...t},r)=>s.jsx(n.f,{ref:r,className:(0,l.cn)(d(),e),...t}));o.displayName=n.f.displayName},82015:(e,t,r)=>{"use strict";r.d(t,{g:()=>i});var s=r(10326),a=r(17577),n=r(51223);let i=a.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));i.displayName="Textarea"},17932:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(68570).createProxy)(String.raw`D:\武欣宇\大三下\计算机设计大赛\StudyPlanner2\src\app\practice\[id]\page.tsx#default`)},13635:(e,t,r)=>{"use strict";r.d(t,{fC:()=>k,z$:()=>C});var s=r(17577),a=r(48051),n=r(93095),i=r(82561),l=r(52067),d=r(53405),o=r(2566),c=r(9815),u=r(45226),f=r(10326),x="Checkbox",[p,m]=(0,n.b)(x),[h,b]=p(x),g=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,name:n,checked:d,defaultChecked:o,required:c,disabled:p,value:m="on",onCheckedChange:b,form:g,...v}=e,[y,k]=s.useState(null),C=(0,a.e)(t,e=>k(e)),R=s.useRef(!1),S=!y||g||!!y.closest("form"),[A,_]=(0,l.T)({prop:d,defaultProp:o??!1,onChange:b,caller:x}),E=s.useRef(A);return s.useEffect(()=>{let e=y?.form;if(e){let t=()=>_(E.current);return e.addEventListener("reset",t),()=>e.removeEventListener("reset",t)}},[y,_]),(0,f.jsxs)(h,{scope:r,state:A,disabled:p,children:[(0,f.jsx)(u.WV.button,{type:"button",role:"checkbox","aria-checked":w(A)?"mixed":A,"aria-required":c,"data-state":N(A),"data-disabled":p?"":void 0,disabled:p,value:m,...v,ref:C,onKeyDown:(0,i.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.M)(e.onClick,e=>{_(e=>!!w(e)||!e),S&&(R.current=e.isPropagationStopped(),R.current||e.stopPropagation())})}),S&&(0,f.jsx)(j,{control:y,bubbles:!R.current,name:n,value:m,checked:A,required:c,disabled:p,form:g,style:{transform:"translateX(-100%)"},defaultChecked:!w(o)&&o})]})});g.displayName=x;var v="CheckboxIndicator",y=s.forwardRef((e,t)=>{let{__scopeCheckbox:r,forceMount:s,...a}=e,n=b(v,r);return(0,f.jsx)(c.z,{present:s||w(n.state)||!0===n.state,children:(0,f.jsx)(u.WV.span,{"data-state":N(n.state),"data-disabled":n.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});y.displayName=v;var j=s.forwardRef(({__scopeCheckbox:e,control:t,checked:r,bubbles:n=!0,defaultChecked:i,...l},c)=>{let x=s.useRef(null),p=(0,a.e)(x,c),m=(0,d.D)(r),h=(0,o.t)(t);s.useEffect(()=>{let e=x.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(m!==r&&t){let s=new Event("click",{bubbles:n});e.indeterminate=w(r),t.call(e,!w(r)&&r),e.dispatchEvent(s)}},[m,r,n]);let b=s.useRef(!w(r)&&r);return(0,f.jsx)(u.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??b.current,...l,tabIndex:-1,ref:p,style:{...l.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function w(e){return"indeterminate"===e}function N(e){return w(e)?"indeterminate":e?"checked":"unchecked"}j.displayName="CheckboxBubbleInput";var k=g,C=y},17124:(e,t,r)=>{"use strict";r.d(t,{gm:()=>n});var s=r(17577);r(10326);var a=s.createContext(void 0);function n(e){let t=s.useContext(a);return e||t||"ltr"}},88957:(e,t,r)=>{"use strict";r.d(t,{M:()=>d});var s,a=r(17577),n=r(65819),i=(s||(s=r.t(a,2)))[" useId ".trim().toString()]||(()=>void 0),l=0;function d(e){let[t,r]=a.useState(i());return(0,n.b)(()=>{e||r(e=>e??String(l++))},[e]),e||(t?`radix-${t}`:"")}},34478:(e,t,r)=>{"use strict";r.d(t,{f:()=>l});var s=r(17577),a=r(45226),n=r(10326),i=s.forwardRef((e,t)=>(0,n.jsx)(a.WV.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var l=i},53405:(e,t,r)=>{"use strict";r.d(t,{D:()=>a});var s=r(17577);function a(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},2566:(e,t,r)=>{"use strict";r.d(t,{t:()=>n});var s=r(17577),a=r(65819);function n(e){let[t,r]=s.useState(void 0);return(0,a.b)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let s,a;if(!Array.isArray(t)||!t.length)return;let n=t[0];if("borderBoxSize"in n){let e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,a=t.blockSize}else s=e.offsetWidth,a=e.offsetHeight;r({width:s,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[9276,5499,434],()=>r(25247));module.exports=s})();