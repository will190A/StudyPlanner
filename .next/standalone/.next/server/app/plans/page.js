(()=>{var e={};e.id=7996,e.ids=[7996],e.modules={72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},38431:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>l.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o}),s(97549),s(66385),s(83336),s(35866);var a=s(23191),t=s(88716),n=s(37922),l=s.n(n),i=s(95231),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(r,d);let o=["",{children:["plans",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,97549)),"D:\\武欣宇\\大三下\\计算机设计大赛\\StudyPlanner2\\src\\app\\plans\\page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,66385)),"D:\\武欣宇\\大三下\\计算机设计大赛\\StudyPlanner2\\src\\app\\plans\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,83336)),"D:\\武欣宇\\大三下\\计算机设计大赛\\StudyPlanner2\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\武欣宇\\大三下\\计算机设计大赛\\StudyPlanner2\\src\\app\\plans\\page.tsx"],u="/plans/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/plans/page",pathname:"/plans",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},89403:(e,r,s)=>{Promise.resolve().then(s.bind(s,68682))},6458:(e,r,s)=>{Promise.resolve().then(s.bind(s,81064))},75290:(e,r,s)=>{"use strict";s.d(r,{Z:()=>a});let a=(0,s(76557).Z)("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},68682:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>l});var a=s(10326),t=s(77109),n=s(75290);function l({children:e}){let{status:r}=(0,t.useSession)();return"loading"===r?a.jsx("div",{className:"flex justify-center items-center min-h-screen",children:a.jsx(n.Z,{className:"h-8 w-8 animate-spin"})}):a.jsx(a.Fragment,{children:e})}},81064:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>m});var a=s(10326),t=s(17577),n=s(35047),l=s(96040),i=s(77109),d=s(91664),o=s(29752),c=s(94880),u=s(33261),p=s(75290),x=s(90434);function m(){let e=(0,n.useRouter)(),{data:r,status:s}=(0,i.useSession)(),{fetchPlans:m,isLoading:g,error:f,plans:h}=(0,l.W)(),[v,j]=(0,t.useState)(!1),[y,b]=(0,t.useState)(null),N=e=>{if(!e||!Array.isArray(e))return 0;let r=e.length,s=e.filter(e=>e.completed).length;return r>0?s/r*100:0},P=a=>{if(console.log(`[PlansPage] handlePlanClick called with planId: ${a}, status: ${s}`),!r?.user){console.log("[PlansPage] User not logged in, saving redirect URL and redirecting to login"),e.push("/login");return}console.log("[PlansPage] User is logged in, navigating to plan details");let t=h.find(e=>e._id===a||e.id===a);if(t){let r={...t,id:a,_id:a};l.W.getState().setPlan(r),e.push(`/plan?id=${a}`)}else console.error("[PlansPage] Plan not found in local store for ID:",a)};return(console.log(`[PlansPage] Rendering with status: ${s}, mounted: ${v}, isLoading: ${g}`),v&&"loading"!==s)?(console.log("[PlansPage] Rendering main content"),(0,a.jsxs)("div",{className:"container mx-auto p-4 pt-16",children:[(f||y)&&a.jsx(u.bZ,{variant:"destructive",className:"mb-4",children:a.jsx(u.X,{children:f||y})}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"我的学习计划"}),a.jsx(d.z,{asChild:!0,onClick:s=>{r?.user||(s.preventDefault(),localStorage.setItem("redirectAfterLogin","/generate"),e.push("/login"))},children:a.jsx(x.default,{href:r?.user?"/generate":"#",children:"创建新计划"})})]}),g?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx(p.Z,{className:"h-8 w-8 animate-spin"})}):r?.user?h&&0!==h.length?a.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:h.map(e=>{let r=e._id||e.id;return r?(0,a.jsxs)(o.Zb,{className:"cursor-pointer hover:shadow-lg transition-shadow",onClick:()=>P(r),children:[a.jsx(o.Ol,{children:a.jsx(o.ll,{className:"text-lg",children:Array.isArray(e.subjects)?e.subjects.join("、"):"未设置科目"})}),a.jsx(o.aY,{children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-2",children:[a.jsx("span",{children:"总体进度"}),(0,a.jsxs)("span",{children:[Math.round(N(e.tasks)),"%"]})]}),a.jsx(c.E,{value:N(e.tasks),className:"h-2"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"总任务数"}),a.jsx("p",{className:"text-2xl font-bold",children:Array.isArray(e.tasks)?e.tasks.length:0})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"已完成任务"}),a.jsx("p",{className:"text-2xl font-bold",children:Array.isArray(e.tasks)?e.tasks.filter(e=>e.completed).length:0})]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,a.jsxs)("p",{children:["开始日期：",e.startDate||"未设置"]}),(0,a.jsxs)("p",{children:["结束日期：",e.endDate||"未设置"]}),(0,a.jsxs)("p",{children:["每日学习时长：",e.dailyHours||0," 小时"]})]}),a.jsx(d.z,{onClick:e=>{e.stopPropagation(),P(r)},className:"w-full",children:"查看详情"})]})})]},r):(console.warn("[PlansPage] Plan found in list missing ID:",e),null)})}):a.jsx(o.Zb,{children:(0,a.jsxs)(o.aY,{className:"p-6 text-center",children:[a.jsx("p",{className:"text-gray-500 mb-4",children:"你还没有创建任何学习计划"}),a.jsx(d.z,{asChild:!0,children:a.jsx(x.default,{href:"/generate",children:"创建第一个计划"})})]})}):a.jsx(o.Zb,{children:(0,a.jsxs)(o.aY,{className:"p-6 text-center",children:[a.jsx("p",{className:"text-gray-500 mb-4",children:"登录后可查看您的学习计划"}),a.jsx(d.z,{onClick:()=>e.push("/login"),children:"登录/注册"})]})})]})):(console.log("[PlansPage] Rendering loading spinner (waiting for mount or session)"),a.jsx("div",{className:"flex justify-center items-center min-h-screen",children:a.jsx(p.Z,{className:"h-8 w-8 animate-spin"})}))}},33261:(e,r,s)=>{"use strict";s.d(r,{X:()=>o,bZ:()=>d});var a=s(10326),t=s(17577),n=s(79360),l=s(51223);let i=(0,n.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),d=t.forwardRef(({className:e,variant:r,...s},t)=>a.jsx("div",{ref:t,role:"alert",className:(0,l.cn)(i({variant:r}),e),...s}));d.displayName="Alert",t.forwardRef(({className:e,...r},s)=>a.jsx("h5",{ref:s,className:(0,l.cn)("mb-1 font-medium leading-none tracking-tight",e),...r})).displayName="AlertTitle";let o=t.forwardRef(({className:e,...r},s)=>a.jsx("div",{ref:s,className:(0,l.cn)("text-sm [&_p]:leading-relaxed",e),...r}));o.displayName="AlertDescription"},91664:(e,r,s)=>{"use strict";s.d(r,{d:()=>d,z:()=>o});var a=s(10326),t=s(17577),n=s(34214),l=s(79360),i=s(51223);let d=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),o=t.forwardRef(({className:e,variant:r,size:s,asChild:t=!1,...l},o)=>{let c=t?n.g7:"button";return a.jsx(c,{className:(0,i.cn)(d({variant:r,size:s,className:e})),ref:o,...l})});o.displayName="Button"},29752:(e,r,s)=>{"use strict";s.d(r,{Ol:()=>i,SZ:()=>o,Zb:()=>l,aY:()=>c,eW:()=>u,ll:()=>d});var a=s(10326),t=s(17577),n=s(51223);let l=t.forwardRef(({className:e,...r},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("rounded-xl border bg-card text-card-foreground shadow",e),...r}));l.displayName="Card";let i=t.forwardRef(({className:e,...r},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...r}));i.displayName="CardHeader";let d=t.forwardRef(({className:e,...r},s)=>a.jsx("h3",{ref:s,className:(0,n.cn)("font-semibold leading-none tracking-tight",e),...r}));d.displayName="CardTitle";let o=t.forwardRef(({className:e,...r},s)=>a.jsx("p",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...r}));o.displayName="CardDescription";let c=t.forwardRef(({className:e,...r},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...r}));c.displayName="CardContent";let u=t.forwardRef(({className:e,...r},s)=>a.jsx("div",{ref:s,className:(0,n.cn)("flex items-center p-6 pt-0",e),...r}));u.displayName="CardFooter"},94880:(e,r,s)=>{"use strict";s.d(r,{E:()=>b});var a=s(10326),t=s(17577),n=s(93095),l=s(45226),i="Progress",[d,o]=(0,n.b)(i),[c,u]=d(i),p=t.forwardRef((e,r)=>{var s,t;let{__scopeProgress:n,value:i=null,max:d,getValueLabel:o=g,...u}=e;(d||0===d)&&!v(d)&&console.error((s=`${d}`,`Invalid prop \`max\` of value \`${s}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let p=v(d)?d:100;null===i||j(i,p)||console.error((t=`${i}`,`Invalid prop \`value\` of value \`${t}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let x=j(i,p)?i:null,m=h(x)?o(x,p):void 0;return(0,a.jsx)(c,{scope:n,value:x,max:p,children:(0,a.jsx)(l.WV.div,{"aria-valuemax":p,"aria-valuemin":0,"aria-valuenow":h(x)?x:void 0,"aria-valuetext":m,role:"progressbar","data-state":f(x,p),"data-value":x??void 0,"data-max":p,...u,ref:r})})});p.displayName=i;var x="ProgressIndicator",m=t.forwardRef((e,r)=>{let{__scopeProgress:s,...t}=e,n=u(x,s);return(0,a.jsx)(l.WV.div,{"data-state":f(n.value,n.max),"data-value":n.value??void 0,"data-max":n.max,...t,ref:r})});function g(e,r){return`${Math.round(e/r*100)}%`}function f(e,r){return null==e?"indeterminate":e===r?"complete":"loading"}function h(e){return"number"==typeof e}function v(e){return h(e)&&!isNaN(e)&&e>0}function j(e,r){return h(e)&&!isNaN(e)&&e<=r&&e>=0}m.displayName=x;var y=s(51223);let b=t.forwardRef(({className:e,value:r,...s},t)=>a.jsx(p,{ref:t,className:(0,y.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...s,children:a.jsx(m,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})}));b.displayName=p.displayName},66385:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`D:\武欣宇\大三下\计算机设计大赛\StudyPlanner2\src\app\plans\layout.tsx#default`)},97549:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>a});let a=(0,s(68570).createProxy)(String.raw`D:\武欣宇\大三下\计算机设计大赛\StudyPlanner2\src\app\plans\page.tsx#default`)}};var r=require("../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),a=r.X(0,[9276,5499,434],()=>s(38431));module.exports=a})();